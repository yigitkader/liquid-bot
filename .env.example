# ============================================================================
# LIQUIDATION BOT CONFIGURATION
# ============================================================================
# This file contains all configuration for the Solana Liquidation Bot.
# Copy this file and customize the values for your environment.
# NEVER commit this file to git (it may contain sensitive API keys).

# ============================================================================
# RPC ENDPOINTS
# ============================================================================
# Helius HTTP RPC endpoint (premium recommended for production)
RPC_HTTP_URL=https://mainnet.helius-rpc.com/?api-key=?

# Helius WebSocket RPC endpoint (programSubscribe destekli)
# WebSocket is used by default for real-time account updates
RPC_WS_URL=wss://mainnet.helius-rpc.com/?api-key=?

# RPC request timeout in seconds (default: 10)
# Prevents RPC calls from hanging indefinitely
# Shorter timeout (5s) for faster validation, longer (30s) for heavy operations
RPC_TIMEOUT_SECONDS=10

# ============================================================================
# WALLET CONFIGURATION
# ============================================================================
# Path to your bot wallet keypair file
WALLET_PATH=./secret/bot-wallet.json

# ============================================================================
# OPERATION MODE
# ============================================================================
# DRY_RUN: Set to true for testing (no real transactions sent)
# Set to false ONLY after thorough testing
DRY_RUN=false

# ============================================================================
# LIQUIDATION PARAMETERS
# ============================================================================
# Health Factor threshold - positions below this are considered liquidatable
HF_LIQUIDATION_THRESHOLD=1.0

# Minimum profit in USD to execute liquidation
# Production: 5.0-10.0 (recommended)
# Testing: 1.0 (only for testing, not production!)
MIN_PROFIT_USD=2.0

# Maximum slippage in basis points (100 bps = 1%)
MAX_SLIPPAGE_BPS=50

# Polling interval in milliseconds (for RPC fallback when WebSocket fails)
# Free RPC: 10000ms (10s) minimum
# Premium RPC: 2000-5000ms
POLL_INTERVAL_MS=30000

# ============================================================================
# PROTOCOL ADDRESSES (Solend Mainnet)
# ============================================================================
SOLEND_PROGRAM_ID=So1endDq2YkqhipRh3WViPa8hdiSpxWy6z3Z6tMCpAo
MAIN_LENDING_MARKET_ADDRESS=4UpD2fh7xH3VP9QQaXtsS1YY3bxzWhtfpks7FatyKvdY
USDC_RESERVE_ADDRESS=BgxfHJDzm44T7XG68MYKx7YisTjZu73tVovyZSjJMpmw
SOL_RESERVE_ADDRESS=8PbodeaosQP19SjYFx855UMqWxH2HynZLdBXmsrbac36

# ============================================================================
# ORACLE PROGRAM IDs
# ============================================================================
PYTH_PROGRAM_ID=FsJ3A3u2vn5cTVofAjvy6y5kwABJAqYWpe4975bi2epH
SWITCHBOARD_PROGRAM_ID=SW1TCH7qEPTdLsDHRgPuMQjbQxKdH2aBStViMFnt64f

# Maximum age of oracle price data in seconds (stale data rejected)
MAX_ORACLE_AGE_SECONDS=60

# ============================================================================
# TOKEN MINT ADDRESSES
# ============================================================================
USDC_MINT=EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v
SOL_MINT=So11111111111111111111111111111111111111112
USDT_MINT=Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB
ETH_MINT=7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs
BTC_MINT=9n4nbM75f5Ui33ZbPYXn59EwSgE8CGsHtAeTH5YFeJ9E

# ============================================================================
# ASSOCIATED TOKEN PROGRAM
# ============================================================================
ASSOCIATED_TOKEN_PROGRAM_ID=ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL

# ============================================================================
# JUPITER API (Slippage Estimation)
# ============================================================================
# Enable Jupiter API for real-time slippage estimation
# Set to true for more accurate slippage calculations
USE_JUPITER_API=true

# ============================================================================
# JITO MEV PROTECTION (Optional but Recommended for Mainnet)
# ============================================================================
# Enable Jito bundle support for MEV protection
# Set USE_JITO=true to enable Jito bundle transactions
# This protects against front-running by other bots
USE_JITO=false

# Jito Block Engine URL (mainnet default)
JITO_BLOCK_ENGINE_URL=https://mainnet.block-engine.jito.wtf

# Jito Tip Account (mainnet default)
JITO_TIP_ACCOUNT=96gYZGLnJYVFmbjzopPSU6QiEV5fGqZ6N6VBY6FuDgU3

# Jito Tip Amount in lamports (default: 10000000 = 0.01 SOL)
# Higher tips increase bundle inclusion probability
# Recommended: 0.01-0.05 SOL (10000000-50000000 lamports)
JITO_TIP_AMOUNT_LAMPORTS=10000000

# ============================================================================
# TEST/VALIDATION ADDRESSES (Optional)
# ============================================================================
# Test wallet pubkey (for validation/testing)
TEST_WALLET_PUBKEY=11111111111111111111111111111111

# Test obligation pubkey - a real Solend obligation account for testing
# To find one:
#   1. Run: ./scripts/find_obligation.sh
#   2. Or use Solana Explorer: https://explorer.solana.com/address/So1endDq2YkqhipRh3WViPa8hdiSpxWy6z3Z6tMCpAo
#   3. Look for accounts with ~1300 bytes size (obligations)
#   4. Copy a pubkey and set it here
# Leave empty if you don't have a specific obligation to test
TEST_OBLIGATION_PUBKEY=

# ============================================================================
# ADVANCED SETTINGS (Optional - defaults are usually fine)
# ============================================================================
# Priority fee per compute unit (micro-lamports)
PRIORITY_FEE_PER_CU=1000

# Base transaction fee in lamports
BASE_TRANSACTION_FEE_LAMPORTS=5000

# DEX fee in basis points (0.2% = 20 bps)
DEX_FEE_BPS=20

# Minimum profit margin in basis points (1% = 100 bps)
MIN_PROFIT_MARGIN_BPS=100

# Default oracle confidence slippage in basis points
DEFAULT_ORACLE_CONFIDENCE_SLIPPAGE_BPS=100

# Slippage final multiplier (safety margin)
SLIPPAGE_FINAL_MULTIPLIER=1.1

# Minimum reserve lamports (0.001 SOL)
MIN_RESERVE_LAMPORTS=1000000

# Liquidation compute units
LIQUIDATION_COMPUTE_UNITS=200000

# Default compute units
DEFAULT_COMPUTE_UNITS=200000

# Default priority fee per CU
DEFAULT_PRIORITY_FEE_PER_CU=1000

# Transaction lock timeout in seconds
TX_LOCK_TIMEOUT_SECONDS=60

# Maximum retries for failed operations
MAX_RETRIES=3

# Initial retry delay in milliseconds
INITIAL_RETRY_DELAY_MS=1000

# Maximum consecutive errors before panic mode
MAX_CONSECUTIVE_ERRORS=30

# WebSocket listener sleep seconds
WS_LISTENER_SLEEP_SECONDS=60

# Expected reserve size in bytes
EXPECTED_RESERVE_SIZE=619

# Liquidation bonus (5% = 0.05)
LIQUIDATION_BONUS=0.05

# Close factor (50% = 0.5)
CLOSE_FACTOR=0.5

# Maximum liquidation slippage
MAX_LIQUIDATION_SLIPPAGE=0.01

# Event bus buffer size
EVENT_BUS_BUFFER_SIZE=50000

# Analyzer max workers
ANALYZER_MAX_WORKERS=4

# Analyzer max workers limit
ANALYZER_MAX_WORKERS_LIMIT=16

# Health manager max error age in seconds
HEALTH_MANAGER_MAX_ERROR_AGE_SECONDS=300

# Retry jitter max milliseconds
RETRY_JITTER_MAX_MS=1000

# Slippage calibration file
SLIPPAGE_CALIBRATION_FILE=slippage_calibration.json

# Slippage min measurements per category
SLIPPAGE_MIN_MEASUREMENTS_PER_CATEGORY=10

# SOL price fallback in USD (if oracle unavailable)
SOL_PRICE_FALLBACK_USD=150.0

# Oracle read fee in lamports
ORACLE_READ_FEE_LAMPORTS=5000

# Oracle accounts read
ORACLE_ACCOUNTS_READ=1

# Z-score for 95% confidence interval
Z_SCORE_95=1.96

# Slippage size thresholds in USD
SLIPPAGE_SIZE_SMALL_THRESHOLD_USD=10000.0
SLIPPAGE_SIZE_LARGE_THRESHOLD_USD=100000.0

# Slippage multipliers
SLIPPAGE_MULTIPLIER_SMALL=0.5
SLIPPAGE_MULTIPLIER_MEDIUM=0.6
SLIPPAGE_MULTIPLIER_LARGE=0.8

# Slippage estimation multiplier
SLIPPAGE_ESTIMATION_MULTIPLIER=0.5

# ============================================================================
# ORACLE MAPPINGS (Optional - uses defaults if not provided)
# ============================================================================
# Custom oracle mappings in JSON format
# Format: {"MINT_ADDRESS":{"pyth":"PYTH_ACCOUNT","switchboard":"SWITCHBOARD_ACCOUNT"}}
# ORACLE_MAPPINGS_JSON={"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v":{"pyth":"5SSkXsEKQepHHAewytPVwdej4epE1h4EmHtUxJ9rKT98","switchboard":"Gnt27xtC473ZT2Mw5u8wZ68Z3gULkSTb5DuxJy7eJotD"}}

# Default Pyth oracle mappings (used if ORACLE_MAPPINGS_JSON not provided)
# DEFAULT_PYTH_ORACLE_MAPPINGS_JSON={"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v":{"pyth":"5SSkXsEKQepHHAewytPVwdej4epE1h4EmHtUxJ9rKT98"},"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB":{"pyth":"3vxLXJqLqF3JG5TCbYycbKWRBbCJCMx7E4xrTU5XG8Jz"},"So11111111111111111111111111111111111111112":{"pyth":"H6ARHf6YXhGYeQfUzQNGk6rDNnLBQKrenN712K4AQJEG"},"7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs":{"pyth":"JBu1AL4obBcCMqKBBxhpWCNUt136ijcuMZLFvTP7iWdB"},"9n4nbM75f5Ui33ZbPYXn59EwSgE8CGsHtAeTH5YFeJ9E":{"pyth":"GVXRSBjFk6e6J3NbVPXohDJetcTjaeeuykUpbQF8UoMU"}}

# Default Switchboard oracle mappings
# DEFAULT_SWITCHBOARD_ORACLE_MAPPINGS_JSON={"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v":{"switchboard":"Gnt27xtC473ZT2Mw5u8wZ68Z3gULkSTb5DuxJy7eJotD"},"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB":{"switchboard":"ETAaeeuQBwsh9mM2gqtwWSbEkf2M8GJ2iVZ3gJgKqJz"},"So11111111111111111111111111111111111111112":{"switchboard":"H6ARHf6YXhGYeQfUzQNGk6rDNnLBQKrenN712K4AQJEG"}}
